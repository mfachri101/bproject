apply from: "$rootDir/gradle/service-template.gradle"

dependencies {
  implementation project(":common-module")

  // wiremock for testing
  testImplementation "org.wiremock:wiremock-standalone:3.3.1"
}

jib {
  from {
    image = 'public.ecr.aws/amazoncorretto/amazoncorretto:21'
  }
  to {
    image = 'integrator-service:latest'
  }
  container {
    environment = ['MONGODB_HOST':'mongodb', 'REDIS_HOST' : 'redis', 'KAFKA_BOOTSTRAP_SERVERS' : 'broker', 'ABACUS_NDC_BASE_URL' : 'http://provider-mock:8080', 'PKFARE_BASE_URL' : 'http://provider-mock:8080']
    ports = ['8081']
    jvmFlags = ['-XX:+UseContainerSupport']
  }
}